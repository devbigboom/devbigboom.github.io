(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-ffbe887e"],{1508:function(t,e,s){},1831:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAFMklEQVRoQ9WaTWwbRRSA35udXe86ju0kDo2dtE1PCJCohJCoBBKo3JA4oQAHTr0jIcSPoEheEC2hQqUSF1QJOCEhWokzXBBSD5xQueRQCQEhSYnjUMfxz6x3dx7aTZw4/lvbWSeOT5Zn/OZ9783Me/NmEEL5EM5dB307t6Ub8QRXrYoqAZkEYJ54BiAZkLQjUVvUwI7FwVp5EwQA0mGHx4EFmMRSlfwYSxhRpcYiuop9yRI2kWtLi7RKeQOmK2CiHESXvgb1B1gg5cwTEHdciEVA+BY+7McCklyplZZ/SxThFrr9yOsLYDK7GdfVyURYijcr6oHUikYhfw23e4XoDcAkPg+QQi4ivQo+TL8y6iJ3F/K9eCMY4DoZmUo1FQEMZbr0ClazdXcVIQ8mim7/6QqQeofGVaM60e8C7VXJoH7eQpcxY3P9bSx36tsRIPUpjY/bYjJokGG3+xBlY3P9s/YQ7QFMiqapmjouyzcbxYO4j0au3XRqBTCJZ3g1fdRzPsiT/ppYgvvNC7sF4OyVcpoR04IE9truOqhoqvgSAJ5H3InMAGBLwq8kaYu9yvH6lSuuyF2NrTf+5wDAxCIlko5I9iM0qC8D6wJj8F1zPwIg4fDzKlOKQTIa20uOvrlhYqn+2z6ASTxN1UzY8x7RfVpB59t2SlqO+qTCWL4fAC/YrTnGaj312AOYfa84pY2psX6E9dI3bABvTHL0rb9MLHjfdwAWSEk/Wp0N2/r+ACF7wJPpe+EDY8XLZn2AySzFE6qY6MWi/fYZBoCnQ6Wg573Y4AOcvUJpRqLjzoPMvsiA3gegvVwICf+2QXkdSXnQDWpoAI5eXTcxh2ASP8fFbDclGFo/MoSHW3YSSR+5oH99HAB+cPvQ+AenTYrFuJjqpoTCxB0EnGvdCvGGK7UbxwHgjfnnpp7DXnafUQUocL2A02ZpJsaVrnn+qAJYjl7G2WxlTlNROcwUQrIvMoVeAYD4jhyygPAXl7RvhrWIvVEkyhpmPq6cDkrcunmgVot8oWliCQFavCgJXyBQJsKMxI2GtoEcTGcrZ4ICWDcAArzNQN5p50Ep4VVCrgwLwAtoJxrA20oPvQaO0wM1m1w8nS1nuMrUQRdxGAAo3ThT6JG6Di64D4Ai94LSFseWNp4ytx+Kcm4cG4BCkxydHwBgrFEHSXBTUuRqN70qjlPFM5/QhOKK3e2vffdhLmJNsRcQ4d3WKE8rrtSf6Qbglqwinnrr37FoMpE6Lg9o3HkNgd4YBMBy9A2Ehe+Vc+dfbMlzGgUO1QMDAuxWKlb8dHreLM1gl3RiFAH88uNlXPcBvArceLxzEWsUAeqH+50jpUksTdW5ThF51AAaD/Z7h/o5kyZVLsbbLeZRA/B2n+XFpH8S3C+rPPczTz/7VNuyyigB+Nb/3VirV+gOFLY6He5HCWC7WPovf2167wKkpbQ4b9JM80WGAuISMNYS7EjSryT5EuPupXZTjxy8TYwjY/ZL7dptl93k6D6ODC+0tEtZbD5vl9EVuctdSou7C3oki7tWleTavf2pUwfuUF5fi6YpeULL67toQbEhKFMMq32wC44GiBN7xbRnQXMtmuHJqaBzc1gWr8vxDiuraBzukm8f4qivWV2RuzsW0jVrg2m9OBGBajKoCDCoN3YuusuFxn0+SFbwPXGzhAVS5h4rJlxSY2GB+E8NSrXS8h8/FeHWy8N7anCAJYTHHhJdIaFaOdrHHu18aposA1m9LLYiuq6oGjHe/rmNtEUtZhe2wILPw3lu8z9IcZKduNPzZQAAAABJRU5ErkJggg=="},"4bfe":function(t,e,r){"use strict";r.r(e);var s=r("5530"),n=(r("4de4"),r("d3b7"),r("25f0"),r("3ca3"),r("ddb0"),r("3835")),i=(r("96cf"),r("1da1")),a={data:function(){return{active:0,list:[]}},computed:{currentList:function(){return this.list.filter(function(t){return 1===t.state})},historyList:function(){return this.list.filter(function(t){return 2===t.state||3===t.state})}},methods:{init:function(){var a=this;return Object(i.a)(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.$tronWeb.call({contractAddress:a.$contracts.KDemocracy.address,method:"propsalCount"}).then();case 2:e=t.sent.toNumber(),e=e;case 4:if(0<e)return t.next=7,Promise.all([a.$tronWeb.call({contractAddress:a.$contracts.KDemocracy.address,method:"propsalOf",parameter:[e-1]}).then(),a.$tronWeb.call({contractAddress:a.$contracts.KDemocracy.address,method:"isVotedOf",parameter:[a.$address,e-1]}).then()]).then(function(t){var e,s=Object(n.a)(t,2),i=s[0],r=s[1],t=i.data.decode(["uint256","uint256","uint256","uint256","uint256","address","uint256","uint256"],["id","createTime","resultTime","deadTime","state","proposer","agreeWeight","disagreeWeight"]),s=window.tronWeb.address.fromHex(t.proposer);try{e=JSON.parse(window.tronWeb.toUtf8(i.info))}catch(t){e=window.tronWeb.toUtf8(i.info)}a.list.push({id:t.id.toString(),createTime:t.createTime.toString(),resultTime:t.resultTime.toString(),deadTime:a.$toTime(t.deadTime.toString(),"Y-M-D H:i"),state:t.state.toNumber(),proposer:s.substr(0,10)+"..."+s.substr(-10,10),agreeWeight:t.agreeWeight.toNumber(),disagreeWeight:t.disagreeWeight.toNumber(),info:e,isVotedOf:r.state})});t.next=10;break;case 7:e--,t.next=4;break;case 10:case"end":return t.stop()}},t)}))()}},mounted:function(){this.$tronWeb&&this.init()}},s=Object(s.a)({},a),a=(r("c619"),r("2877")),s=Object(a.a)(s,function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"vote"},[i("div",{staticClass:"select"},[i("div",{class:{active:!s.active},on:{click:function(t){s.active=0}}},[s._v("当前投票")]),i("div",{class:{active:s.active},on:{click:function(t){s.active=1}}},[s._v("历史投票")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!s.active,expression:"!active"}],staticClass:"content"},s._l(s.currentList,function(e,t){return i("div",{key:t,staticClass:"list"},[i("div",[i("div",{staticClass:"row1"},[i("img",{attrs:{src:r("1831")}}),i("span",[s._v("#"+s._s(e.id))]),i("div",[s._v("投票中")])]),i("div",{staticClass:"row2"},[i("span",[s._v("提案：")]),i("span",[s._v(s._s(e.info.strings.zh.title))])]),i("div",{staticClass:"row3"},[i("span",[s._v("提案人：")]),i("span",[s._v(s._s(e.proposer))])]),i("div",{staticClass:"row4"},[i("span",[s._v("票数：")]),i("span",[s._v(s._s(e.agreeWeight))]),i("span",[s._v("-"+s._s(e.disagreeWeight))])]),i("span",{staticClass:"row5"},[s._v("截止日期："+s._s(e.deadTime))])]),i("button",{on:{click:function(t){0===e.isVotedOf&&s.$router.push({path:"./voteDetails",query:{id:e.id}})}}},[s._v(s._s(0===e.isVotedOf?"参与投票":"已投票"))])])}),0),i("div",{directives:[{name:"show",rawName:"v-show",value:s.active,expression:"active"}],staticClass:"content"},s._l(s.historyList,function(t,e){return i("div",{key:e,staticClass:"list"},[i("div",[i("div",{staticClass:"row1"},[i("img",{attrs:{src:r("1831")}}),i("span",[s._v("#"+s._s(t.id))]),i("div",{class:{Passed:2===t.state,Rejected:3===t.state}},[s._v(s._s(2===t.state?"已通过":"已拒绝"))])]),i("div",{staticClass:"row2"},[i("span",[s._v("提案：")]),i("span",[s._v(s._s(t.info.strings.zh.title))])]),i("div",{staticClass:"row3"},[i("span",[s._v("提案人：")]),i("span",[s._v(s._s(t.proposer))])]),i("div",{staticClass:"row4"},[i("span",[s._v("票数：")]),i("span",[s._v(s._s(t.agreeWeight))]),i("span",[s._v("-"+s._s(t.disagreeWeight))])]),i("span",{staticClass:"row5"},[s._v("截止日期："+s._s(t.deadTime))])]),i("button",{attrs:{disabled:!0}},[s._v("已结束")])])}),0)])},[],!1,null,"cfbc8c76",null);e.default=s.exports},c619:function(t,e,s){"use strict";s("1508")}}]);