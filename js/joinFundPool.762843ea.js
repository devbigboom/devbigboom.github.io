(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["joinFundPool"],{"0861":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"mk-navbar"},[o("img",{attrs:{src:n("c590")},on:{click:function(e){return t.$router.back(1)}}}),o("span",{domProps:{textContent:t._s(t.title)}})])},r=[],s={props:{title:{type:String,required:!0}}},a=s,i=a,u=(n("2ef3"),n("2877")),c=Object(u["a"])(i,o,r,!1,null,"e5207e16",null);e["default"]=c.exports},"133e":function(t,e,n){},1500:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"join-fund-pool"},[o("mk-navbar",{attrs:{title:t.title}}),o("div",{staticClass:"box"},[o("div",{staticClass:"container"},[o("div",{staticClass:"menus"},[o("div",{class:t.isJustswap?"active":"",on:{click:function(e){t.isJustswap=!0}}},[t._v("JustSwap")]),o("div",{class:t.isJustswap?"":"active",on:{click:function(e){t.isJustswap=!1}}},[t._v("AcSwap")])]),o("just-swap",{directives:[{name:"show",rawName:"v-show",value:t.isJustswap,expression:"isJustswap"}]}),o("nft-swap",{directives:[{name:"show",rawName:"v-show",value:!t.isJustswap,expression:"!isJustswap"}],on:{change:t.getNftswapPool}})],1),t.nftswapPool?o("div",{staticClass:"your-share"},[o("div",{staticClass:"tokens nftswap"},[o("div",[o("div",[o("img",{attrs:{src:t.nftswapPool.logo0}}),o("img",{attrs:{src:t.nftswapPool.logo1}})]),o("span",[t._v(t._s(t.nftswapPool.symbol0)+"/"+t._s(t.nftswapPool.symbol1))])]),o("div",[o("span",[t._v("LP: "+t._s(t.nftswapPool.lp))]),o("span",[t._v(t._s(t.nftswapPool.myShare)+"%")])])]),o("div",{staticClass:"amounts"},[o("div",[o("span",[t._v(t._s(t.nftswapPool.symbol0)+": "+t._s(t.nftswapPool.token0))]),o("span",[t._v(t._s(t.nftswapPool.symbol1)+": "+t._s(t.nftswapPool.token1))])]),o("van-button",{on:{click:function(e){t.$router.push({path:"/nftredemption",query:{info:JSON.stringify(t.nftswapPool)}})}}},[t._v(t._s(t.$t("joinFundPool.text11")))])],1)]):t._e(),t._l(t.justswapPools,(function(e){return o("div",{key:e.address,staticClass:"your-share"},[o("div",{staticClass:"tokens justswap"},[o("div",[o("div",[o("img",{attrs:{src:n("90bd")}}),o("img",{attrs:{src:e.logo}})]),o("span",[t._v("TRX/"+t._s(e.symbol))])]),o("div",[o("span",[t._v("LP: "+t._s(e.lp))]),o("span",[t._v(t._s(e.myShare)+"%")])])]),o("div",{staticClass:"amounts"},[o("div",[o("span",[t._v("TRX: "+t._s(e.trx))]),o("span",[t._v(t._s(e.symbol)+": "+t._s(e.token))])]),o("van-button",{on:{click:function(n){t.$router.push({path:"/redemption",query:{info:JSON.stringify(e)}})}}},[t._v(t._s(t.$t("joinFundPool.text11")))])],1)])})),t.justswapPools.length<1&&!t.nftswapPool?o("div",{staticClass:"not-liquidity"},[o("img",{attrs:{src:n("f0b7")}}),o("span",[t._v(t._s(t.$t("joinFundPool.text16")))])]):t._e()],2)],1)},r=[],s=(n("4de4"),n("d81d"),n("0d03"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),a=n("aca7"),i={components:{"mk-navbar":function(){return Promise.resolve().then(n.bind(null,"0861"))},"just-swap":function(){return Promise.resolve().then(n.bind(null,"3817"))},"nft-swap":function(){return Promise.resolve().then(n.bind(null,"7877"))}},data:function(){return{nftswapPool:null,justswapPools:[],isJustswap:!0,title:this.$t("joinFundPool.text15")}},created:function(){this.$utils&&this.init()},methods:{init:function(){this.getJustswapPool()},getNftswapPool:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function o(){var r,s,a,i,u,c,d,l,p,m;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,n.$utils.call({contractAddress:n.$contracts.Factory.address,method:"getPair(address,address)",parameter:[{type:"address",value:t.tokenAddress},{type:"address",value:e.tokenAddress}]});case 2:if(r=o.sent.constant_result[0],s=0===Number(r)?null:r.decode(["address"]),!s){o.next=22;break}return o.next=7,n.$utils.call({contractAddress:s,method:"getReserves()"});case 7:return a=o.sent.constant_result[0].decode(["uint112","uint112","uint","uint","uint","uint"],["_reserve0","_reserve1","_tradeFeeRate","_burn0or1","_rate","_posRate"]),i=a._reserve0,u=a._reserve1,o.next=12,n.$utils.call({contractAddress:s,method:"balanceOf(address)",parameter:[{type:"address",value:n.$address}]});case 12:if(c=o.sent.constant_result[0].decode(["uint"]).toString().toBN(),"0"!==c.toString()){o.next=15;break}return o.abrupt("return",!1);case 15:return o.next=17,n.$utils.call({contractAddress:s,method:"totalSupply()"});case 17:d=o.sent.constant_result[0].decode(["uint"]).toString().toBN(),l="0x".concat(tronWeb.address.toHex(t.tokenAddress)).toBN().gt("0x".concat(tronWeb.address.toHex(e.tokenAddress))),p=l?u.toString():i.toString(),m=l?i.toString():u.toString(),n.nftswapPool={logo0:t.tokenLogoUrl,logo1:e.tokenLogoUrl,symbol0:t.tokenSymbol,symbol1:e.tokenSymbol,token0:c.times(p).div(d).toFixed(0).fromSun(t.tokenDecimal).toFixed(6),token1:c.times(m).div(d).toFixed(0).fromSun(e.tokenDecimal).toFixed(6),reserve0:p,reserve1:m,lp:c.toString().fromSun(18).toFixed(6),myShare:c.div(d).times(100).toString().toFixed(2),token0Address:t.tokenAddress,token1Address:e.tokenAddress,token0Decimal:t.tokenDecimal,token1Decimal:e.tokenDecimal,address:s,source:{lp:c,token0:c.times(p).div(d),token1:c.times(m).div(d)}};case 22:case"end":return o.stop()}}),o)})))()},getJustswapPool:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,o,r,s,i,u,c,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["f"])(t.$address);case 2:return n=e.sent.data.liquidityList.filter((function(t){return t.jswapBalance>0})),o=n.map((function(t){return t.address})),e.next=6,t.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getPool(address,address[])",parameter:[{type:"address",value:t.$address},{type:"address[]",value:o}]});case 6:for(r=e.sent.constant_result[0].decode(["uint256[]","uint256[]","uint256[]","uint256[]"],["_token","_trx","_uniToken","_totalsupply"]),s=r._token,i=r._trx,u=r._uniToken,c=r._totalsupply,d=[],l=0;l<o.length;l++)d.push({logo:n[l].tokenLogoUrl,symbol:n[l].tokenSymbol,token:s[l].toString().fromSun(n[l].tokenDecimal),trx:i[l].toString().fromSun(),lp:u[l].toString().fromSun(),myShare:u[l].toString().toBN().div(c[l].toString().toBN()).multipliedBy("100".toBN()).toString().toFixed(2),address:n[l].address,tokenAddress:n[l].tokenAddress,tokenDecimal:n[l].tokenDecimal});t.justswapPools=d;case 14:case"end":return e.stop()}}),e)})))()}}},u=i,c=u,d=(n("8db9"),n("2877")),l=Object(d["a"])(c,o,r,!1,null,"0a5c9282",null);e["default"]=l.exports},"159b":function(t,e,n){var o=n("da84"),r=n("fdbc"),s=n("17c2"),a=n("9112");for(var i in r){var u=o[i],c=u&&u.prototype;if(c&&c.forEach!==s)try{a(c,"forEach",s)}catch(d){c.forEach=s}}},"17c2":function(t,e,n){"use strict";var o=n("b727").forEach,r=n("a640"),s=n("ae40"),a=r("forEach"),i=s("forEach");t.exports=a&&i?[].forEach:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}},"1d1c":function(t,e,n){var o=n("23e7"),r=n("83ab"),s=n("37e8");o({target:"Object",stat:!0,forced:!r,sham:!r},{defineProperties:s})},"22a8":function(t,e,n){"use strict";n("d01f")},"2ef3":function(t,e,n){"use strict";n("133e")},3817:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"just-swap"},[o("div",{staticClass:"content"},[o("div",{staticClass:"tokens"},[o("div",{staticClass:"token"},[t._m(0),o("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),o("span",[t._v(t._s(t.trxBalance))])]),o("div",{staticClass:"logos"},[o("img",{attrs:{src:n("90bd")}}),o("img",{attrs:{src:t.tokenInfo.tokenLogoUrl}})]),o("div",{staticClass:"token"},[o("div",{staticClass:"symbol select",on:{click:t.openSearch}},[t.tokenInfo?o("span",[t._v(t._s(t.tokenInfo.tokenSymbol))]):o("span",{staticClass:"placeholder"},[t._v(t._s(t.$t("joinFundPool.text3")))]),o("img",{attrs:{src:n("716f")}})]),o("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),o("span",[t._v(t._s(t.tokenBalance))])])]),o("div",{staticClass:"inputs"},[o("van-field",{attrs:{type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputTRX},model:{value:t.trxAmount,callback:function(e){t.trxAmount=e},expression:"trxAmount"}}),o("span",[t._v("+")]),o("van-field",{attrs:{type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputToken},model:{value:t.tokenAmount,callback:function(e){t.tokenAmount=e},expression:"tokenAmount"}})],1),o("div",{staticClass:"rate"},[o("div",[o("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateChanged,expression:"!rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1TRX = "+t._s(t.rate)+t._s(t.tokenInfo.tokenSymbol))]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.rateChanged,expression:"rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1"+t._s(t.tokenInfo.tokenSymbol)+" = "+t._s(t.rate)+"TRX")]),o("img",{attrs:{src:n("2bc3")},on:{click:t.switchRate}})]),o("div",[o("span",[t._v(t._s(t.$t("joinFundPool.text6"))+" "+t._s(t.prop))]),o("img",{attrs:{src:n("4fe1")},on:{click:t.openSetting,change:t.changeDeadline}})])]),o("van-button",{on:{click:t.addLiquidity}},[t._v(t._s(t.$t("joinFundPool.text7")))])],1),o("search-tokens",{ref:"searchTokens",on:{select:t.select}}),o("fundpool-state",{attrs:{state:t.state,trxAmount:t.trxAmount,tokenInfo:{amount:t.tokenAmount,symbol:t.tokenInfo.tokenSymbol},lp:t.min_liquidity,rate:t.rate,reRate:t.reRate,prop:t.prop},on:{addLiquidity:t.addLiquidity,close:t.close}}),o("trading-setup",{ref:"tradingSetup",on:{change:t.changeDeadline}})],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"symbol"},[n("span",[t._v("TRX")])])}],s=(n("99af"),n("0d03"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("96cf"),n("1da1")),a=n("a981"),i=n("aca7"),u={components:{"search-tokens":function(){return Promise.resolve().then(n.bind(null,"bab4"))},"fundpool-state":function(){return Promise.resolve().then(n.bind(null,"e0d3"))},"trading-setup":function(){return Promise.resolve().then(n.bind(null,"0430"))}},data:function(){return{trxAmount:"",tokenAmount:"",trxBalance:"--",tokenBalance:"--",tokenInfo:{},contract:{},exTrxBalance:0,exTokenBalace:0,totalLiquidity:0,allowance:0,rate:"--",reRate:"",trxInputing:!1,tokenInputing:!1,prop:"--",rateChanged:!1,state:"none",min_liquidity:100.0001,slipPoint:2,deadline:600}},created:function(){if(this.$utils){var t=this.$route.query;t.token?this.select({token:JSON.parse(t.token)}):this.select({token:i["m"]}),this.init()}},methods:{miningMessage:function(){vant.Toast.fail(this.$t("justswap.text1"))},init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tronWeb.trx.getBalance(t.$address);case 2:t.trxBalance=e.sent.fromSun().toFixed(2);case 3:case"end":return e.stop()}}),e)})))()},addLiquidity:function(){var t=this;if(this.trxBalance<Number(this.trxAmount))return vant.Toast.fail("TRX"+this.$t("joinFundPool.text13"));if(this.tokenBalance<Number(this.tokenAmount))return vant.Toast.fail("".concat(this.tokenInfo.tokenSymbol).concat(this.$t("joinFundPool.text13")));if(this.allowance<Number(this.tokenAmount))return this.approve();var e=Math.floor((new Date).getTime()/1e3)+this.deadline,n=this.trxAmount.toSun().toBN(),o=n.div(100).multipliedBy(this.slipPoint),r=n.minus(o).div(this.exTrxBalance).multipliedBy(this.totalLiquidity).toFixed(0),a=n.plus(o).multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toFixed(0);this.min_liquidity=r.fromSun(),this.contract.addLiquidity(r,a,e).send({callValue:this.trxAmount.toSun()}).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state="in",e.next=3,t.$loading(n);case 3:if(!e.sent){e.next=7;break}t.state="done",e.next=8;break;case 7:t.state="none";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},approve:function(){var t=this,e=tronWeb.contract(trc20Abi,this.tokenInfo.tokenAddress);e.approve(this.tokenInfo.address,(10*Number(this.tokenAmount)).toSun(this.tokenInfo.tokenDecimal)).send().then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state="approve",e.next=3,t.$loading(n);case 3:if(!e.sent){e.next=10;break}return e.next=6,t.$utils.call({contractAddress:t.tokenInfo.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.tokenInfo.address}]});case 6:t.allowance=e.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.tokenInfo.tokenDecimal),t.state="approved",e.next=11;break;case 10:t.state="none";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},select:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r,s,i,u,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.token,"TRX"!==o.tokenSymbol){n.next=3;break}return n.abrupt("return",vant.Toast.fail(e.$t("joinFundPool.text12")));case 3:return e.tokenInfo=o,e.contract=tronWeb.contract(a,o.address),n.next=7,e.$utils.call({contractAddress:o.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:e.$address}]});case 7:return e.tokenBalance=n.sent.constant_result[0].decode(["uint256"]).toString().fromSun(o.tokenDecimal).toFixed(2),n.next=10,e.$utils.call({contractAddress:"TCNYd8L5hBey9FwPpvgtvDaY2cHjMFVLZu",method:"getSingleInfo(address,address)",parameter:[{type:"address",value:e.$address},{type:"address",value:o.tokenAddress}]});case 10:r=n.sent.constant_result[0].decode(["address","uint256","uint256","uint256","uint256","uint256","uint256","uint256"],["_exchangeAddr","_allowance","_exTokenBalace","_exTrxBalance","_totalLiquidity","_userUniAmount","_userTrxAmount","_userTokenAmount"]),s=r._exTrxBalance,i=r._exTokenBalace,u=r._totalLiquidity,c=r._allowance,e.exTrxBalance=s.toString().toBN(),e.exTokenBalace=i.toString().toBN(),e.totalLiquidity=u.toString().toBN(),e.allowance=c.toString().fromSun(o.tokenDecimal),e.rate="1".toSun().toBN().multipliedBy(e.exTokenBalace).div(e.exTrxBalance).toString().fromSun(e.tokenInfo.tokenDecimal).toFixed(e.tokenInfo.tokenDecimal),e.reRate="1".toSun(e.tokenInfo.tokenDecimal).toBN().multipliedBy(e.exTrxBalance).div(e.exTokenBalace).toString().fromSun().toFixed(6);case 21:case"end":return n.stop()}}),n)})))()},inputTRX:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.tokenInputing){e.next=2;break}return e.abrupt("return",t.tokenInputing=!1);case 2:if(""!==t.trxAmount){e.next=6;break}return t.tokenAmount="",t.prop="--",e.abrupt("return",!1);case 6:t.trxInputing=!0,t.trxAmount.length>0&&(t.tokenAmount=t.trxAmount.toSun().toBN().multipliedBy(t.exTokenBalace).div(t.exTrxBalance).toString().fromSun(t.tokenInfo.tokenDecimal).toFixed(t.tokenInfo.tokenDecimal)),n=t.trxAmount.toSun().toBN(),t.prop="".concat(n.div(t.exTrxBalance.plus(n)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},inputToken:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.trxInputing){e.next=2;break}return e.abrupt("return",t.trxInputing=!1);case 2:if(""!==t.tokenAmount){e.next=6;break}return t.trxAmount="",t.prop="--",e.abrupt("return",!1);case 6:t.tokenInputing=!0,t.tokenAmount.length>0&&(t.trxAmount=t.tokenAmount.toSun(t.tokenInfo.tokenDecimal).toBN().multipliedBy(t.exTrxBalance).div(t.exTokenBalace).toString().fromSun().toFixed(6)),n=t.trxAmount.toSun().toBN(),t.prop="".concat(n.div(t.exTrxBalance.plus(n)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 10:case"end":return e.stop()}}),e)})))()},switchRate:function(){if(!this.tokenInfo.address)return vant.Toast.fail(this.$t("joinFundPool.text14"));this.rateChanged=!this.rateChanged,this.rateChanged?this.rate="1".toSun(this.tokenInfo.tokenDecimal).toBN().multipliedBy(this.exTrxBalance).div(this.exTokenBalace).toString().fromSun().toFixed(6):this.rate="1".toSun().toBN().multipliedBy(this.exTokenBalace).div(this.exTrxBalance).toString().fromSun(this.tokenInfo.tokenDecimal).toFixed(this.tokenInfo.tokenDecimal)},changeDeadline:function(t){var e=t.slipPoint,n=t.deadline;this.slipPoint=e,this.deadline=n},openSetting:function(){this.$refs.tradingSetup.open()},openSearch:function(){this.$refs.searchTokens.open()},close:function(){this.state="none",this.trxAmount="",this.tokenAmount="",this.init()}}},c=u,d=c,l=(n("7d4e"),n("2877")),p=Object(l["a"])(d,o,r,!1,null,"7bf462ca",null);e["default"]=p.exports},"3ca2":function(t,e,n){},4160:function(t,e,n){"use strict";var o=n("23e7"),r=n("17c2");o({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"4b5e":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.state,expression:"state !== 'none'"}],staticClass:"transaction-state"},[n("create",{directives:[{name:"show",rawName:"v-show",value:["create","creating"].includes(t.state),expression:"['create', 'creating'].includes(state)"}],attrs:{state:t.state},on:{createPair:t.createPair}}),n("before",{directives:[{name:"show",rawName:"v-show",value:["approve","approved"].includes(t.state),expression:"['approve', 'approved'].includes(state)"}],attrs:{state:t.state,token0:t.token0,token1:t.token1,waitApprove:t.waitApprove},on:{addLiquidity:t.addLiquidity}}),n("in",{directives:[{name:"show",rawName:"v-show",value:"in"===t.state,expression:"state === 'in'"}],attrs:{token0:t.token0,token1:t.token1,lp:t.lp,rate:t.rate,reRate:t.reRate,prop:t.prop}}),n("after",{directives:[{name:"show",rawName:"v-show",value:"done"===t.state,expression:"state === 'done'"}],attrs:{token0:t.token0,token1:t.token1},on:{close:t.close}})],1)},r=[],s=(n("a9e3"),n("d3b7"),{components:{create:function(){return n.e("chunk-478f5fcc").then(n.bind(null,"50a5"))},before:function(){return n.e("chunk-4c21e34a").then(n.bind(null,"97b7"))},in:function(){return n.e("chunk-5d273222").then(n.bind(null,"925c"))},after:function(){return n.e("chunk-ddf8c3e0").then(n.bind(null,"1b2d"))}},props:{state:{type:String,required:!0},token0:{type:Object,required:!0},token1:{type:Object,required:!0},waitApprove:{type:Array,required:!0},lp:{type:[Number,String],required:!0},rate:{type:[Number,String],required:!0},reRate:{type:[Number,String],required:!0},prop:{type:[Number,String],required:!0}},data:function(){return{}},methods:{createPair:function(){this.$emit("createPair")},addLiquidity:function(){this.$emit("addLiquidity")},close:function(){this.$emit("close")}}}),a=s,i=a,u=(n("22a8"),n("2877")),c=Object(u["a"])(i,o,r,!1,null,"08df4d06",null);e["default"]=c.exports},"4fe1":function(t,e){t.exports="data:image/png;base64,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"},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));n("a4d3"),n("4de4"),n("4160"),n("1d1c"),n("7a82"),n("e439"),n("dbb4"),n("b64b"),n("159b");function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},6104:function(t,e,n){},"6ae0":function(t,e,n){"use strict";n("d695")},"716f":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAQCAYAAAABOs/SAAADJklEQVRIS63TXWibVRzH8e//eZI8zULVra5zvjCmfcvQ6c2GzosJeiEigkhBLwYVWVBDlbgyWhX3ZFub0KjdbPskWlR04oooeOOFIkxERGHeTFdbO1tUxPkCvkyydOk5f3nSTXSsa6r7353D//w+nDdJ900dBN2i6MC8d/GBF/zLy1zg6uxUt7ll5hq0OoRoEtd9RNK9kxUET6GM6lNuQ2Rs2G/940LZt/iHIsk/126QqJYEuQmYB96TdN/kxyCbQV2gLJA1Gh8r5tf9+n9x39fIj5XJ6wVnRERvDPNUOeEIGUnvmFinnvO6KJuBCHBSlZwrbmk41/rzf8VTqcPRyMrEJhzZJ7BpweQ3LNkgPj4sYfDDj31+lXjRVwW2KMRATqrq0xgvCArrjy8X9/2jsZ/K7s3i8ixwQ4gCv2BtdjT+RhHftzU4rO6d01ca17wosBXwajh2v3WckVJ/+/f14t3d055JsFXEFICNqqigP1jH2VWMHXwpRMOsv+Fw8GBm6grXo4TorUAcZU7QQF1v/2j/1d8shXd1zTYk1lZvE0xOkWtrqOi3KvjBQMcrIOHOa/UvuHbs/uxlWpkbcYTbgcRpfEzM/L7hwnVfL4Z3+bMNK8qVO8RlD8iGBdTOGMiWcsnX/omeEw4nH318Zk3VVodE9E6gEWROVF5WMUOjueRXZ+OZzHfxqle+S0V9oAOwqjoNZIN8x/jZ6KJw7dj9Y81uxQwiejdwEXBKkAPWyDPBYNuXZ/BU6vCKaFPjPaBPAm01FJ1Qld3FfPub50LPC9fwnmPNTtTsFegEvUTgFCrjjuMWnhto+WJbz/FEY/TEvYLtBW1ZQO0Rq+7uUr7t7cXQJeHaa++bXm2xu0DvA1adxt+ySoCwUUR7gPWoGFQ/M9bZUyq0vnM+tC44bErtmLrUjegTjsM2oAmlCvI7orHaNYQo+onC3iDf/u5SaN1w2Jju+7RJbeNOcZz7FV0tZz6EYlT0I2O0//nB5Pv1oMuCw+YH/KOrGubcDMh20DWEKHoIKwPBYPsH9aLLhsMFD/UeWeloLI3odoUJNeSLhY4Pl4OGOX8BZ+ZVwJ5VGhkAAAAASUVORK5CYII="},7877:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"nft-swap"},[o("div",{staticClass:"content"},[o("div",{staticClass:"tokens"},[o("div",{staticClass:"token"},[o("div",{staticClass:"symbol select",on:{click:function(e){return t.openSearch("token0")}}},[o("span",[t._v(t._s(t.token0.tokenSymbol))]),o("img",{attrs:{src:n("716f")}})]),o("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),o("span",[t._v(t._s(t.token0Balance))])]),o("div",{staticClass:"logos"},[o("img",{attrs:{src:t.token0.tokenLogoUrl}}),o("img",{attrs:{src:t.token1.tokenLogoUrl}})]),o("div",{staticClass:"token"},[o("div",{staticClass:"symbol select",on:{click:function(e){return t.openSearch("token1")}}},[o("span",[t._v(t._s(t.token1.tokenSymbol))]),o("img",{attrs:{src:n("716f")}})]),o("span",{domProps:{textContent:t._s(t.$t("joinFundPool.text2"))}}),o("span",[t._v(t._s(t.token1Balance))])])]),o("div",{staticClass:"inputs"},[o("van-field",{attrs:{type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputToken0},model:{value:t.token0Amount,callback:function(e){t.token0Amount=e},expression:"token0Amount"}}),o("span",[t._v("+")]),o("van-field",{class:t.overflow?"overflow":"",attrs:{id:"token1",type:"number",placeholder:t.$t("joinFundPool.text4")},on:{input:t.inputToken1},model:{value:t.token1Amount,callback:function(e){t.token1Amount=e},expression:"token1Amount"}})],1),o("div",{staticClass:"rate-container"},[o("span",[t._v(t._s(t.$t("nftswap.text5")))]),o("van-popover",{attrs:{actions:t.gasActions,trigger:"click",placement:"right"},scopedSlots:t._u([{key:"reference",fn:function(){return[o("img",{attrs:{src:n("4fd3")}})]},proxy:!0}]),model:{value:t.gasPopover,callback:function(e){t.gasPopover=e},expression:"gasPopover"}}),o("div",{staticClass:"stepper"},[o("span",{on:{click:t.lessGas}},[t._v("-")]),o("div",[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.gasPrice,expression:"gasPrice"}],attrs:{disabled:!t.canModify},domProps:{value:t.gasPrice},on:{input:[function(e){e.target.composing||(t.gasPrice=e.target.value)},t.inputBrunOrBonus]}})]),o("span",[t._v("%")])]),o("span",{on:{click:t.addGas}},[t._v("+")])])],1),t.isBurn?o("div",{staticClass:"rate-container"},[o("span",[t._v(t._s(t.$t("nftswap.text6")))]),o("van-popover",{attrs:{actions:t.transactionActions,trigger:"click",placement:"right"},scopedSlots:t._u([{key:"reference",fn:function(){return[o("img",{attrs:{src:n("4fd3")}})]},proxy:!0}],null,!1,2915626883),model:{value:t.transactionPopover,callback:function(e){t.transactionPopover=e},expression:"transactionPopover"}}),o("div",{staticClass:"rate-select"},[o("div",[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.burn,expression:"burn"}],attrs:{disabled:!t.canModify},domProps:{value:t.burn},on:{input:[function(e){e.target.composing||(t.burn=e.target.value)},t.inputBrunOrBonus]}})]),o("span",[t._v("%")])]),o("i"),o("div",{staticClass:"select"},[t.burnToken?o("img",{attrs:{src:t.burnToken.tokenLogoUrl}}):t._e(),t.burnToken?o("span",{domProps:{textContent:t._s(t.burnToken.tokenSymbol)}}):o("span",[t._v("none")]),o("img",{staticClass:"arrow",attrs:{src:n("716f")},on:{click:t.showBurnOptions}}),o("ul",{directives:[{name:"show",rawName:"v-show",value:t.burnOptionsShow,expression:"burnOptionsShow"}],staticClass:"options",on:{click:function(e){t.burnOptionsShow=!1}}},[["TRX","USDT"].includes(t.token0.tokenSymbol)?t._e():o("li",{on:{click:function(e){return t.selectBurn(t.token0)}}},[o("img",{attrs:{src:t.token0.tokenLogoUrl}}),o("span",{domProps:{textContent:t._s(t.token0.tokenSymbol)}})]),["TRX","USDT"].includes(t.token1.tokenSymbol)?t._e():o("li",{on:{click:function(e){return t.selectBurn(t.token1)}}},[o("img",{attrs:{src:t.token1.tokenLogoUrl}}),o("span",{domProps:{textContent:t._s(t.token1.tokenSymbol)}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:t.burnOptionsShow,expression:"burnOptionsShow"}],staticClass:"overlay",on:{click:function(e){t.burnOptionsShow=!1}}})])])],1):t._e(),t.isBonus?o("div",{staticClass:"rate-container"},[o("span",[t._v(t._s(t.$t("nftswap.text7")))]),o("van-popover",{attrs:{actions:t.bonusActions,trigger:"click",placement:"right"},scopedSlots:t._u([{key:"reference",fn:function(){return[o("img",{attrs:{src:n("4fd3")}})]},proxy:!0}],null,!1,2915626883),model:{value:t.bonusPopover,callback:function(e){t.bonusPopover=e},expression:"bonusPopover"}}),o("div",{staticClass:"rate-select"},[o("div",[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.bonus,expression:"bonus"}],attrs:{disabled:!t.canModify},domProps:{value:t.bonus},on:{input:[function(e){e.target.composing||(t.bonus=e.target.value)},t.inputBrunOrBonus]}})]),o("span",[t._v("%")])]),o("i"),o("div",{staticClass:"select"},[t.bonusToken?o("img",{attrs:{src:t.bonusToken.tokenLogoUrl}}):t._e(),t.bonusToken?o("span",{domProps:{textContent:t._s(t.bonusToken.tokenSymbol)}}):o("span",[t._v("none")]),o("img",{staticClass:"arrow",staticStyle:{visibility:"hidden"},attrs:{src:n("716f")}})])])],1):t._e(),o("div",{staticClass:"rate"},[o("div",[o("span",{directives:[{name:"show",rawName:"v-show",value:!t.rateChanged,expression:"!rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1"+t._s(t.token0.tokenSymbol)+" = "+t._s(t.rate)+t._s(t.token1.tokenSymbol))]),o("span",{directives:[{name:"show",rawName:"v-show",value:t.rateChanged,expression:"rateChanged"}]},[t._v(t._s(t.$t("joinFundPool.text5"))+" 1"+t._s(t.token1.tokenSymbol)+" = "+t._s(t.rate)+t._s(t.token0.tokenSymbol))]),o("img",{attrs:{src:n("2bc3")},on:{click:t.switchRate}})]),o("div",[o("span",[t._v(t._s(t.$t("joinFundPool.text6"))+" "+t._s(t.prop))]),o("img",{attrs:{src:n("4fe1")},on:{click:t.openSetting,change:t.changeDeadline}})])]),o("van-button",{on:{click:t.addLiquidity}},[t._v(t._s(t.$t("joinFundPool.text7")))])],1),o("search-tokens",{ref:"searchTokens",on:{select:t.select}}),o("nft-state",{attrs:{state:t.state,token0:{amount:t.token0Amount,symbol:t.token0.tokenSymbol},token1:{amount:t.token1Amount,symbol:t.token1.tokenSymbol},waitApprove:t.waitApprove,lp:t.liquidity,rate:t.rate,reRate:t.reRate,prop:t.prop},on:{createPair:t.createPair,addLiquidity:t.addLiquidity,close:t.close}}),o("trading-setup",{ref:"tradingSetup",on:{change:t.changeDeadline}})],1)},r=[],s=(n("99af"),n("caad"),n("0d03"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("2532"),n("96cf"),n("1da1")),a=n("5530"),i=n("3952"),u=n("aca7"),c={components:{"search-tokens":function(){return Promise.resolve().then(n.bind(null,"bab4"))},"nft-state":function(){return Promise.resolve().then(n.bind(null,"4b5e"))},"trading-setup":function(){return Promise.resolve().then(n.bind(null,"0430"))}},data:function(){return{token0Amount:"",token1Amount:"",token0Balance:"--",token1Balance:"--",token0:u["m"],token1:u["a"],reserve0:0,reserve1:0,totalLiquidity:0,token0Allowance:0,token1Allowance:0,rate:"--",reRate:"--",token0Inputing:!1,token1Inputing:!1,prop:"--",rateChanged:!1,state:"none",liquidity:0,slipPoint:2,deadline:600,gasPrice:1,burn:5,burnOptionsShow:!1,burnToken:null,bonus:5,bonusToken:null,gasPopover:!1,transactionPopover:!1,bonusPopover:!1,gasActions:[{text:this.$t("nftswap.text1")}],transactionActions:[{text:this.$t("nftswap.text2")}],bonusActions:[{text:this.$t("nftswap.text3")}],canModify:!0,overflow:!1}},computed:{isBurn:function(){return!(u["b"].includes(this.token0.tokenSymbol)&&u["b"].includes(this.token1.tokenSymbol))},isBonus:function(){return[this.token0.tokenName,this.token1.tokenName].includes("TRC20-POS")},waitApprove:function(){var t=[];return this.token0Allowance<Number(this.token0Amount)&&t.push(this.token0),this.token1Allowance<Number(this.token1Amount)&&t.push(this.token1),t}}},d="T9yD14Nj9j7xAB4dbGeiX9h8unkKHxuWwb",l=Object(a["a"])(Object(a["a"])({},c),{},{created:function(){this.$utils&&this.init()},methods:{selectBurn:function(t){this.burnToken=t,this.bonusToken=t,this.burn=5*this.gasPrice,this.bonus=5*this.gasPrice},init:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,o,r,s,a,i,u,c,d,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.burnToken=t.token1,t.bonusToken=t.token1,e.next=4,t.$utils.call({contractAddress:t.token0.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:t.$address}]});case 4:return t.token0Balance=e.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.token0.tokenDecimal).toFixed(2),e.next=7,t.$utils.call({contractAddress:t.token1.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:t.$address}]});case 7:return t.token1Balance=e.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.token1.tokenDecimal).toFixed(2),e.next=10,t.$utils.call({contractAddress:t.$contracts.Factory.address,method:"getPair(address,address)",parameter:[{type:"address",value:t.token0.tokenAddress},{type:"address",value:t.token1.tokenAddress}]});case 10:if(n=e.sent.constant_result[0],t.pairAddress=0!==Number(n)?n.decode(["address"]):null,!t.pairAddress){e.next=40;break}return t.$emit("change",t.token0,t.token1),e.next=16,t.$utils.call({contractAddress:t.pairAddress,method:"getReserves()"});case 16:return o=e.sent.constant_result[0].decode(["uint112","uint112","uint","uint","uint","uint"],["_reserve0","_reserve1","_tradeFeeRate","_burn0or1","_rate","_posRate"]),r=o._reserve0,s=o._reserve1,a="0x".concat(tronWeb.address.toHex(t.token0.tokenAddress)).toBN().gt("0x".concat(tronWeb.address.toHex(t.token1.tokenAddress))),t.reserve0=a?s.toString().toBN():r.toString().toBN(),t.reserve1=a?r.toString().toBN():s.toString().toBN(),e.next=24,t.$utils.call({contractAddress:t.pairAddress,method:"totalSupply()"});case 24:return t.totalLiquidity=e.sent.constant_result[0].decode(["uint"]).toString().toBN(),t.rate="1".toSun(t.token0.tokenDecimal).toBN().multipliedBy(t.reserve1).div(t.reserve0).toString().fromSun(t.token1.tokenDecimal).toFixed(6),t.reRate="1".toSun(t.token1.tokenDecimal).toBN().multipliedBy(t.reserve0).div(t.reserve1).toString().fromSun(t.token0.tokenDecimal).toFixed(6),e.next=29,t.$utils.call({contractAddress:t.pairAddress,method:"getNftParma()"});case 29:i=e.sent.constant_result[0].decode(["bytes"]).decode(["address","uint","uint","uint","uint"],["burnToken","burnRate","posRate","tradeRate","totalShare"]),u=i.burnToken,c=i.burnRate,d=i.posRate,l=i.tradeRate,t.gasPrice=l.toNumber(),t.burn=c.toNumber(),t.bonus=d.toNumber(),t.burnToken=tronWeb.address.fromHex(u)===t.token0.tokenAddress?t.token0:tronWeb.address.fromHex(u)===t.token1.tokenAddress?t.token1:null,t.bonusToken=t.burnToken,(t.gasPrice>0||t.burn>0||t.bonus>0)&&(t.canModify=!1);case 40:return e.next=42,t.$utils.call({contractAddress:t.token0.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.$contracts.Router.address}]});case 42:return t.token0Allowance=e.sent.constant_result[0].decode(["uint"]).toString().fromSun(t.token0.tokenDecimal),e.next=45,t.$utils.call({contractAddress:t.token1.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.$contracts.Router.address}]});case 45:t.token1Allowance=e.sent.constant_result[0].decode(["uint"]).toString().fromSun(t.token1.tokenDecimal);case 46:case"end":return e.stop()}}),e)})))()},createPair:function(){var t=this;this.$contracts.Factory.createPair(this.token0.tokenAddress,this.token1.tokenAddress).send({feeLimit:"1000".toSun()}).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state="creating",e.next=3,t.$loading(n);case 3:if(!e.sent){e.next=10;break}return e.next=6,t.$utils.call({contractAddress:t.$contracts.Factory.address,method:"getPair(address,address)",parameter:[{type:"address",value:t.token0.tokenAddress},{type:"address",value:t.token1.tokenAddress}]});case 6:t.pairAddress=e.sent.constant_result[0].decode(["address"]),t.waitApprove.length>0?t.approve(t.waitApprove[0].tokenSymbol===t.token0.tokenSymbol?"token0":"token1"):t.addLiquidity(),e.next=11;break;case 10:t.state="none";case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},addLiquidity:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,i,u,c,l,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.token0Balance<Number(t.token0Amount))){e.next=4;break}return e.abrupt("return",vant.Toast.fail("".concat(t.token0.tokenSymbol).concat(t.$t("joinFundPool.text13"))));case 4:if(!(t.token1Balance<Number(t.token1Amount))){e.next=8;break}return e.abrupt("return",vant.Toast.fail("".concat(t.token1.tokenSymbol).concat(t.$t("joinFundPool.text13"))));case 8:if(t.pairAddress){e.next=12;break}return e.abrupt("return",t.state="create");case 12:if(!(t.token0Allowance<Number(t.token0Amount))){e.next=16;break}return e.abrupt("return",t.approve());case 16:if(!(t.token1Allowance<Number(t.token1Amount))){e.next=20;break}return e.abrupt("return",t.approve("token1"));case 20:if(![t.token0.tokenSymbol,t.token1.tokenSymbol].includes("TRX")){e.next=22;break}return e.abrupt("return",t.addLiquidityETH());case 22:n=Math.floor((new Date).getTime()/1e3)+t.deadline,o="0"===t.reserve0.toString()?1:t.token0Amount.toSun(t.token0.tokenDecimal).toBN().div(100).times(t.slipPoint).toFixed(0),r="0"===t.reserve0.toString()?1:t.token1Amount.toSun(t.token1.tokenDecimal).toBN().div(100).times(t.slipPoint).toFixed(0),a=[["uint","uint","uint","uint"],[t.token0Amount.toSun(t.token0.tokenDecimal),t.token1Amount.toSun(t.token1.tokenDecimal),o,r]],i=[["address","uint","uint","uint"],[t.burnToken?t.burnToken.tokenAddress:d,t.burn,t.bonus,t.gasPrice]],"0"===t.reserve0.toString()?t.liquidity=t.token0Amount.toSun(t.token0.tokenDecimal).toBN().times(t.token1Amount.toSun(t.token1.tokenDecimal)).sqrt().toString().fromSun(18).toFixed(18):(u=t.token0Amount.toSun(t.token0.tokenDecimal).toBN(),c=t.token1Amount.toSun(t.token1.tokenDecimal).toBN(),l=u.times(t.totalLiquidity).div(t.reserve0),p=c.times(t.totalLiquidity).div(t.reserve1),t.liquidity=l.gt(p)?p.toString().fromSun(18).toFixed(18):l.toString().fromSun(18).toFixed(18)),t.$contracts.Router.addLiquidity(t.token0.tokenAddress,t.token1.tokenAddress,t.$address,n,a.encode(),i.encode()).send({feeLimit:"1000".toSun()}).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state="in",e.next=3,t.$loading(n);case 3:if(!e.sent){e.next=7;break}t.state="done",e.next=8;break;case 7:t.state="none";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 29:case"end":return e.stop()}}),e)})))()},addLiquidityETH:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,o,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="TRX"===t.token0.tokenSymbol?"token1":"token0",o=Math.floor((new Date).getTime()/1e3)+t.deadline,e.next=4,t.$utils.call({contractAddress:t.$contracts.Router.address,method:"quote(uint,uint,uint)",parameter:[{type:"uint",value:t.token1Amount.toSun(t.token1.tokenDecimal)},{type:"uint",value:t.reserve1.toString()},{type:"uint",value:t.reserve0.toString()}]});case 4:return r=e.sent.constant_result[0].decode(["uint"]).toString(),e.next=7,t.$utils.call({contractAddress:t.$contracts.Router.address,method:"quote(uint,uint,uint)",parameter:[{type:"uint",value:t.token0Amount.toSun(t.token0.tokenDecimal)},{type:"uint",value:t.reserve0.toString()},{type:"uint",value:t.reserve1.toString()}]});case 7:a=e.sent.constant_result[0].decode(["uint"]).toString(),i=[["address","uint","uint","uint"],[t.burnToken?t.burnToken.tokenAddress:d,t.burn,t.bonus,t.gasPrice]],t.$contracts.Router.addLiquidityETH(t[n].tokenAddress,t.token1Amount.toSun(t.token1.tokenDecimal),r,a,t.$address,o,i.encode()).send({callValue:t.token0Amount.toSun(),feeLimit:"1000".toSun()}).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.state="in",e.next=3,t.$loading(n);case 3:if(!e.sent){e.next=7;break}t.state="done",e.next=8;break;case 7:t.state="none";case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"token0",n=tronWeb.contract(i,this[e].tokenAddress);n.approve(this.$contracts.Router.address,(10*Number(this["".concat(e,"Amount")])).toSun(this[e].tokenDecimal)).send().then(function(){var n=Object(s["a"])(regeneratorRuntime.mark((function n(o){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.state="approve",n.next=3,t.$loading(o);case 3:if(!n.sent){n.next=10;break}return n.next=6,t.$utils.call({contractAddress:t[e].tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:t.$address},{type:"address",value:t.$contracts.Router.address}]});case 6:t["".concat(e,"Allowance")]=n.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t[e].tokenDecimal),t.waitApprove.length>0?t.approve("token1"):t.state="approved",n.next=11;break;case 10:t.state="none";case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())},select:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var o,r,s,a,i,u,c,d,l,p,m,k,f;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=t.token,r=t.who,s=void 0===r?"token0":r,e[s]=o,"TRX"!==o.tokenSymbol){n.next=8;break}return n.next=5,e.getTRXBalance();case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,e.getTokenBalance(o);case 10:n.t0=n.sent;case 11:return e["".concat(s,"Balance")]=n.t0,n.next=14,e.$utils.call({contractAddress:e.$contracts.Factory.address,method:"getPair(address,address)",parameter:[{type:"address",value:e.token0.tokenAddress},{type:"address",value:e.token1.tokenAddress}]});case 14:if(a=n.sent.constant_result[0],e.pairAddress=0!==Number(a)?a.decode(["address"]):null,!e.pairAddress){n.next=44;break}return n.next=19,e.$utils.call({contractAddress:e.pairAddress,method:"getReserves()"});case 19:return i=n.sent.constant_result[0].decode(["uint112","uint112","uint","uint","uint","uint"],["_reserve0","_reserve1","_tradeFeeRate","_burn0or1","_rate","_posRate"]),u=i._reserve0,c=i._reserve1,d="0x".concat(tronWeb.address.toHex(e.token0.tokenAddress)).toBN().gt("0x".concat(tronWeb.address.toHex(e.token1.tokenAddress))),e.reserve0=d?c.toString().toBN():u.toString().toBN(),e.reserve1=d?u.toString().toBN():c.toString().toBN(),n.next=27,e.$utils.call({contractAddress:e.pairAddress,method:"totalSupply()"});case 27:return e.totalLiquidity=n.sent.constant_result[0].decode(["uint"]).toString().toBN(),e.rate="1".toSun(e.token0.tokenDecimal).toBN().multipliedBy(e.reserve1).div(e.reserve0).toString().fromSun(e.token1.tokenDecimal).toFixed(6),e.reRate="1".toSun(e.token1.tokenDecimal).toBN().multipliedBy(e.reserve0).div(e.reserve1).toString().fromSun(e.token0.tokenDecimal).toFixed(6),n.next=32,e.$utils.call({contractAddress:e.pairAddress,method:"getNftParma()"});case 32:l=n.sent.constant_result[0].decode(["bytes"]).decode(["address","uint","uint","uint","uint"],["burnToken","burnRate","posRate","tradeRate","totalShare"]),p=l.burnToken,m=l.burnRate,k=l.posRate,f=l.tradeRate,e.gasPrice=f.toNumber(),e.burn=m.toNumber(),e.bonus=k.toNumber(),e.burnToken=tronWeb.address.fromHex(p)===e.token0.tokenAddress?e.token0:tronWeb.address.fromHex(p)===e.token1.tokenAddress?e.token1:null,e.bonusToken=e.burnToken,n.next=55;break;case 44:e.reserve0=0,e.reserve1=0,e.totalLiquidity=0,e.rate="--",e.reRate="--",e.gasPrice=1,e.burn=5,e.bonus=5,e.burnToken=null,e.bonusToken=null,e.canModify=!0;case 55:if("TRX"===o.tokenSymbol){n.next=61;break}return n.next=58,e.$utils.call({contractAddress:o.tokenAddress,method:"allowance(address,address)",parameter:[{type:"address",value:e.$address},{type:"address",value:e.$contracts.Router.address}]});case 58:e["".concat(s,"Allowance")]=n.sent.constant_result[0].decode(["uint"]).toString().fromSun(o.tokenDecimal),n.next=62;break;case 61:e["".concat(s,"Allowance")]=1e8;case 62:e.$emit("change",e.token0,e.token1);case 63:case"end":return n.stop()}}),n)})))()},inputToken0:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==t.reserve0.toString()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!t.token1Inputing){e.next=4;break}return e.abrupt("return",t.token1Inputing=!1);case 4:if(""!==t.token0Amount){e.next=9;break}return t.token1Amount="",t.prop="--",t.overflow=!1,e.abrupt("return",!1);case 9:t.token0Inputing=!0,t.token0Amount.length>0&&(t.token1Amount=t.token0Amount.toSun(t.token0.tokenDecimal).toBN().multipliedBy(t.reserve1).div(t.reserve0).toString().fromSun(t.token1.tokenDecimal).toFixed(2)),n=t.token0Amount.toSun(t.token0.tokenDecimal).toBN(),t.prop="".concat(n.div(t.reserve0.plus(n)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 13:case"end":return e.stop()}}),e)})))()},inputToken1:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==t.reserve0.toString()){e.next=2;break}return e.abrupt("return",!1);case 2:if(!t.token0Inputing){e.next=4;break}return e.abrupt("return",t.token0Inputing=!1);case 4:if(""!==t.token1Amount){e.next=9;break}return t.token0Amount="",t.prop="--",t.overflow=!1,e.abrupt("return",!1);case 9:t.token1Inputing=!0,t.token1Amount.length>0&&(t.token0Amount=t.token1Amount.toSun(t.token1.tokenDecimal).toBN().multipliedBy(t.reserve0).div(t.reserve1).toString().fromSun(t.token0.tokenDecimal).toFixed(t.token0.tokenDecimal)),n=t.token0Amount.toSun().toBN(),t.prop="".concat(n.div(t.reserve0.plus(n)).multipliedBy("100".toBN()).toString().toFixed(6),"%");case 13:case"end":return e.stop()}}),e)})))()},switchRate:function(){if(this.rateChanged=!this.rateChanged,!this.pairAddress)return!1;var t;t=this.rateChanged?"1".toSun(this.token1.tokenDecimal).toBN().multipliedBy(this.reserve0).div(this.reserve1).toString().fromSun(this.token0.tokenDecimal).toFixed(6):"1".toSun(this.token0.tokenDecimal).toBN().multipliedBy(this.reserve1).div(this.reserve0).toString().fromSun(this.token1.tokenDecimal).toFixed(6),this.rate=t>0?t:"<0.000001"},getTRXBalance:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tronWeb.trx.getBalance(t.$address);case 2:return e.abrupt("return",e.sent.fromSun().toFixed(2));case 3:case"end":return e.stop()}}),e)})))()},getTokenBalance:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$utils.call({contractAddress:t.tokenAddress,method:"balanceOf(address)",parameter:[{type:"address",value:e.$address}]});case 2:return n.abrupt("return",n.sent.constant_result[0].decode(["uint256"]).toString().fromSun(t.tokenDecimal).toFixed(2));case 3:case"end":return n.stop()}}),n)})))()},changeDeadline:function(t){var e=t.slipPoint,n=t.deadline;this.slipPoint=e,this.deadline=n},openSetting:function(){this.$refs.tradingSetup.open()},openSearch:function(t){this.$refs.searchTokens.open(t)},close:function(){this.state="none",this.token0Amount="",this.token1Amount="",this.init()},addGas:function(){if(!this.canModify)return vant.Toast.fail(this.$t("nftswap.text4"));this.gasPrice++,this.gasPrice>100&&(this.gasPrice=100)},lessGas:function(){if(!this.canModify)return vant.Toast.fail(this.$t("nftswap.text4"));this.gasPrice--,this.gasPrice<1&&(this.gasPrice=1)},showBurnOptions:function(){if(!this.canModify)return vant.Toast.fail(this.$t("nftswap.text4"));this.burnOptionsShow=!0},inputBrunOrBonus:function(){var t=Number(this.burn),e=Number(this.bonus),n=Number(this.gasPrice);t>5*n&&(this.burn=5*n),e>5*n&&(this.bonus=5*n)}}}),p=l,m=p,k=(n("6ae0"),n("a867"),n("2877")),f=Object(k["a"])(m,o,r,!1,null,"46f391a1",null);e["default"]=f.exports},"7d4e":function(t,e,n){"use strict";n("6104")},"8db9":function(t,e,n){"use strict";n("dd79")},a867:function(t,e,n){"use strict";n("b2fe")},b2fe:function(t,e,n){},c590:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAArCAYAAACNWyPFAAADsklEQVRYR63XWcjmcxjG8c/Pvu+y5QChbAcUSSmS7UTOLDVlJ0uE7A4QMqaUfT+hzIGiJEsUOcGBKBlqJjPUNJoZQ5ax/nRN9zs95n3e932eZ97f2f9d/t/n/t33dV3308zz6b1vhSPwFI7CY20+Gb33rXEinsch9e4V8wbpvW+LU/AsDkDe/QcWzQuk974DzsEj2Lsq+A0PYeFmQ3rvu+A8PIjdCvAz7sRzrbX1E0N67/nfvPQy3IGd0bEGN2Fxay3XteHexj4F2AvX4zrsiH+xEtfgrSnARJDe+xbYF3dhAbbHP/gWV+Cj1tqfg598rEp671viwGrw6dgOf+NrXILPWmt/bXo1I0NKZJn9Z3B8AXLnn+NifDMMMPJ1lciOxAul5mjid3yMS7G8tZaKhp45KymRHYcXcRCi6l/wYfVgZWstPZnxzArpvaepJ1UFaXYA0cDbuBar5wLMel29951wGp5ExjVNX4fXcTPWttYytnOeoZX03iOy2MSiElzGdjVewr34aVTA0Ep673viAtyDWEbOKjyBR3NdrbUoe+SzsZJSccwtNnELcl152fe4D6+k4eMCNlZSgP1wA65CXDX3vRw34p2M7CSADZCyiaj4bpxfIstILsWV0UJrLZqY+AQSFT+Ms7ENYgtf4SJ8OWh0k1ICeQNnINkc1cYmLsSymWxiXFggP2LXsv24Z4zuNfw6aQ+mGWTvPZMU206zM03f4bYS3cTNHgSlkggvuri/0i2/T/ikT9k6Jhrb/0HyUDl9Fh7H7nV1P9TmEdjYApwGKVAi9NTKi4gyVpK8XlzjvW4cKxkKKVBcN8tZciO705QpvllCjSnOauvDJm+aQQ7kR0AHD9j7B7i87H3GgBoJUhUlN46uniQRI9Isa5/U8rBqHA3NGFqV6YfXMJxQdrMeX5RYV2y6lcwk0rmSMT3JlS3E1HYS21lSFS0ZxXZGyfhMWQz09qogok1PllUsfJpVdDarmRNSPcrfJeOzLV5dWZMoSNbkZ+/O5tQjQQZAyfrsWLGdpGZsKKl5K17NcAzzu5EhU9fRe48jxKUTzzHWnLW11T89zFjHhgzY0Lk1ENkJ8p6sSvkK98CmNjQRZMCGzqzlYp8CRUsv1/XFhjYsHBNDBmzo5KogE5iRz6RlN8vytyZ+t1mQAmUvPrb87tACJfzeqxFfudmQARvK1+rsy8cUKFrKQr5gXiAFylVlIQ8oTp7naOn9eYMUKO6wf2VSbCjPS+cVMiDaPUqwhyX0/gPgMEQpYSGeKAAAAABJRU5ErkJggg=="},d01f:function(t,e,n){},d695:function(t,e,n){},d81d:function(t,e,n){"use strict";var o=n("23e7"),r=n("b727").map,s=n("1dde"),a=n("ae40"),i=s("map"),u=a("map");o({target:"Array",proto:!0,forced:!i||!u},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,n){var o=n("23e7"),r=n("83ab"),s=n("56ef"),a=n("fc6a"),i=n("06cf"),u=n("8418");o({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,n,o=a(t),r=i.f,c=s(o),d={},l=0;while(c.length>l)n=r(o,e=c[l++]),void 0!==n&&u(d,e,n);return d}})},dd79:function(t,e,n){},e0d3:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:"none"!==t.state,expression:"state !== 'none'"}],staticClass:"transaction-state"},[n("before",{directives:[{name:"show",rawName:"v-show",value:["approve","approved"].includes(t.state),expression:"['approve', 'approved'].includes(state)"}],attrs:{state:t.state,trxAmount:t.trxAmount,tokenInfo:t.tokenInfo},on:{addLiquidity:t.addLiquidity}}),n("in",{directives:[{name:"show",rawName:"v-show",value:"in"===t.state,expression:"state === 'in'"}],attrs:{trxAmount:t.trxAmount,tokenInfo:t.tokenInfo,lp:t.lp,rate:t.rate,reRate:t.reRate,prop:t.prop}}),n("after",{directives:[{name:"show",rawName:"v-show",value:"done"===t.state,expression:"state === 'done'"}],attrs:{trxAmount:t.trxAmount,tokenInfo:t.tokenInfo},on:{close:t.close}})],1)},r=[],s=(n("a9e3"),n("d3b7"),{components:{before:function(){return n.e("chunk-21fce4e0").then(n.bind(null,"6c15"))},in:function(){return n.e("chunk-765fce44").then(n.bind(null,"7089"))},after:function(){return n.e("chunk-e0645df4").then(n.bind(null,"229b"))}},props:{state:{type:String,required:!0},trxAmount:{type:[Number,String],required:!0},tokenInfo:{type:Object,required:!0},lp:{type:[Number,String],required:!0},rate:{type:[Number,String],required:!0},reRate:{type:[Number,String],required:!0},prop:{type:[Number,String],required:!0}},data:function(){return{}},methods:{addLiquidity:function(){this.$emit("addLiquidity")},close:function(){this.$emit("close")}}}),a=s,i=a,u=(n("fc5a"),n("2877")),c=Object(u["a"])(i,o,r,!1,null,"402f4639",null);e["default"]=c.exports},e439:function(t,e,n){var o=n("23e7"),r=n("d039"),s=n("fc6a"),a=n("06cf").f,i=n("83ab"),u=r((function(){a(1)})),c=!i||u;o({target:"Object",stat:!0,forced:c,sham:!i},{getOwnPropertyDescriptor:function(t,e){return a(s(t),e)}})},f0b7:function(t,e,n){t.exports=n.p+"img/not-liquidity.1fc31064.png"},fc5a:function(t,e,n){"use strict";n("3ca2")}}]);